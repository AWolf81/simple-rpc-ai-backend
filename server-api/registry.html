<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav > ul.nav-list:first-child > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li:not(:nth-child(4)) > a, .site-nav > ul.nav-list:first-child > li > ul > li > ul > li > ul > li a { background-image: none; } .site-nav > ul.nav-list:not(:first-child) a, .site-nav li.external a { background-image: none; } .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(3) > ul > li:nth-child(4) > a { font-weight: 600; text-decoration: none; }.site-nav > ul.nav-list:first-child > li:nth-child(1) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(3) > button svg, .site-nav > ul.nav-list:first-child > li:nth-child(1) > ul > li:nth-child(3) > ul > li:nth-child(4) > button svg { transform: rotate(-90deg); }.site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list, .site-nav > ul.nav-list:first-child > li.nav-list-item:nth-child(1) > ul.nav-list > li.nav-list-item:nth-child(3) > ul.nav-list > li.nav-list-item:nth-child(4) > ul.nav-list { display: block; } </style> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Registry | Simple RPC AI Backend Docs</title> <meta name="generator" content="Jekyll v4.4.1" /> <meta property="og:title" content="Registry" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Developer documentation for the Simple RPC AI Backend server." /> <meta property="og:description" content="Developer documentation for the Simple RPC AI Backend server." /> <meta property="og:site_name" content="Simple RPC AI Backend Docs" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Registry" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Developer documentation for the Simple RPC AI Backend server.","headline":"Registry","url":"/server-api/registry.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Simple RPC AI Backend Docs </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Documentation category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/" class="nav-list-link">Documentation</a><ul class="nav-list"><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting Started category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/getting-started/" class="nav-list-link">Getting Started</a><ul class="nav-list"><li class="nav-list-item"><a href="/getting-started/overview.html" class="nav-list-link">Project Overview</a></li><li class="nav-list-item"><a href="/getting-started/installation.html" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="/getting-started/quickstart.html" class="nav-list-link">Quickstart</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Common Configurations category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/common-configurations/" class="nav-list-link">Common Configurations</a><ul class="nav-list"><li class="nav-list-item"><a href="/common-configurations/environment.html" class="nav-list-link">Environment Configuration</a></li><li class="nav-list-item"><a href="/common-configurations/authentication.html" class="nav-list-link">Authentication</a></li><li class="nav-list-item"><a href="/common-configurations/workspaces.html" class="nav-list-link">Workspaces</a></li><li class="nav-list-item"><a href="/common-configurations/cors.html" class="nav-list-link">CORS</a></li><li class="nav-list-item"><a href="/common-configurations/extension-oauth.html" class="nav-list-link">Extension OAuth</a></li><li class="nav-list-item"><a href="/common-configurations/mcp-oauth-authentication.html" class="nav-list-link">MCP OAuth Authentication</a></li><li class="nav-list-item"><a href="/common-configurations/server-workspaces-vs-mcp-roots.html" class="nav-list-link">Server Workspaces vs MCP Roots</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Server API category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/server-api/" class="nav-list-link">Server API</a><ul class="nav-list"><li class="nav-list-item"><a href="/server-api/overview.html" class="nav-list-link">Overview</a></li><li class="nav-list-item"><a href="/server-api/resources.html" class="nav-list-link">Resources</a></li><li class="nav-list-item"><a href="/server-api/tools.html" class="nav-list-link">Tools</a></li><li class="nav-list-item"><a href="/server-api/registry.html" class="nav-list-link">Registry</a></li><li class="nav-list-item"><a href="/server-api/methods.html" class="nav-list-link">Methods</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Common Issues category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/common-issues/" class="nav-list-link">Common Issues</a><ul class="nav-list"><li class="nav-list-item"><a href="/common-issues/troubleshooting.html" class="nav-list-link">Troubleshooting</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Tips & Tricks category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/tips-and-tricks/" class="nav-list-link">Tips & Tricks</a><ul class="nav-list"><li class="nav-list-item"><a href="/tips-and-tricks/testing-trpc.html" class="nav-list-link">Testing tRPC Procedures</a></li><li class="nav-list-item"><a href="/tips-and-tricks/typescript-usage.html" class="nav-list-link">TypeScript Usage</a></li></ul></li></ul></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/AWolf81/simple-rpc-ai-backend" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > GitHub Repository <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <nav class="page-nav"> <a class="page-nav__prev" href="/server-api/tools.html"> <span aria-hidden="true">←</span> <span class="page-nav__text">Tools</span> </a> <a class="page-nav__next" href="/server-api/methods.html"> <span class="page-nav__text">Methods</span> <span aria-hidden="true">→</span> </a> </nav> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Simple RPC AI Backend Docs" aria-label="Search Simple RPC AI Backend Docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/AWolf81/simple-rpc-ai-backend" class="site-button" > Repository </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/">Documentation</a></li> <li class="breadcrumb-nav-list-item"><a href="/server-api/">Server API</a></li> <li class="breadcrumb-nav-list-item"><span>Registry</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="provider-registry"> <a href="#provider-registry" class="anchor-heading" aria-labelledby="provider-registry"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Provider Registry </h1> <p>The Simple RPC AI Backend integrates with <code class="language-plaintext highlighter-rouge">@anolilab/ai-model-registry</code> to deliver curated provider and model metadata with resilient fallbacks.</p> <h2 id="architecture"> <a href="#architecture" class="anchor-heading" aria-labelledby="architecture"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Architecture </h2> <ol> <li><strong>External Registry Package</strong> – ships curated provider/model metadata via <code class="language-plaintext highlighter-rouge">@anolilab/ai-model-registry</code>.</li> <li><strong>ProviderRegistryService</strong> – filters providers, applies overrides, and exposes metadata via tRPC.</li> <li><strong>Fallback Data</strong> – ensures availability when the external registry package cannot be resolved.</li> </ol> <h2 id="quick-start"> <a href="#quick-start" class="anchor-heading" aria-labelledby="quick-start"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Quick Start </h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pnpm <span class="nb">install</span>
<span class="c"># Registry data is available immediately with sensible defaults</span>
</code></pre></div></div> <h3 id="programmatic-usage"> <a href="#programmatic-usage" class="anchor-heading" aria-labelledby="programmatic-usage"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programmatic Usage </h3> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ProviderRegistryService</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">simple-rpc-ai-backend</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">registry</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ProviderRegistryService</span><span class="p">(</span>
  <span class="p">[</span><span class="dl">'</span><span class="s1">anthropic</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">openai</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">[</span><span class="dl">'</span><span class="s1">anthropic</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">openai</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">custom-ai</span><span class="dl">'</span><span class="p">],</span>
  <span class="p">[</span><span class="dl">'</span><span class="s1">free</span><span class="dl">'</span><span class="p">]</span>
<span class="p">);</span>
</code></pre></div></div> <h2 id="trpc-methods"> <a href="#trpc-methods" class="anchor-heading" aria-labelledby="trpc-methods"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> tRPC Methods </h2> <ul> <li><code class="language-plaintext highlighter-rouge">ai.listProviders</code> – service-managed providers with metadata and pricing.</li> <li><code class="language-plaintext highlighter-rouge">ai.listProvidersBYOK</code> – BYOK providers that expect user-supplied keys.</li> </ul> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="p">{</span> <span class="nx">providers</span><span class="p">,</span> <span class="nx">source</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">client</span><span class="p">.</span><span class="nx">ai</span><span class="p">.</span><span class="nx">listProviders</span><span class="p">.</span><span class="nf">query</span><span class="p">();</span>
</code></pre></div></div> <h2 id="configuration"> <a href="#configuration" class="anchor-heading" aria-labelledby="configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration </h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span><span class="nv">AI_SERVICE_PROVIDERS</span><span class="o">=</span>anthropic,openai,google
<span class="nb">export </span><span class="nv">AI_BYOK_PROVIDERS</span><span class="o">=</span>anthropic,openai,google,custom-ai
</code></pre></div></div> <h2 id="pricing-overrides"> <a href="#pricing-overrides" class="anchor-heading" aria-labelledby="pricing-overrides"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pricing Overrides </h2> <div class="language-typescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">registry</span><span class="p">.</span><span class="nf">addPricingOverride</span><span class="p">({</span>
  <span class="na">provider</span><span class="p">:</span> <span class="dl">'</span><span class="s1">openai</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">model</span><span class="p">:</span> <span class="dl">'</span><span class="s1">gpt-4o</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">pricing</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">input</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
    <span class="na">output</span><span class="p">:</span> <span class="mi">10</span>
  <span class="p">},</span>
  <span class="na">reason</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Enterprise contract pricing</span><span class="dl">'</span>
<span class="p">});</span>
</code></pre></div></div> <p>Apply provider-level overrides by omitting the <code class="language-plaintext highlighter-rouge">model</code> property.</p> <h2 id="monitoring--resilience"> <a href="#monitoring--resilience" class="anchor-heading" aria-labelledby="monitoring--resilience"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Monitoring &amp; Resilience </h2> <p>The service relies on <code class="language-plaintext highlighter-rouge">@anolilab/ai-model-registry</code> at runtime. When the library is unavailable the backend serves the bundled fallback metadata and <code class="language-plaintext highlighter-rouge">getHealthStatus()</code> returns <code class="language-plaintext highlighter-rouge">status: 'unhealthy'</code> with the error message from the import. Hook that method into your own health endpoint or scheduler if you need alerts when the live registry is unreachable. Because data is loaded directly from the package there is no explicit cache directory to manage; customize pricing or model entries through <code class="language-plaintext highlighter-rouge">addPricingOverride</code> / <code class="language-plaintext highlighter-rouge">addModelOverride</code> as shown above.</p> </main> <hr> <footer> <p><a href="#top" id="back-to-top"></a></p> <p class="text-small text-grey-dk-100 mb-0">© 2025 Simple RPC AI Backend.</p> <div class="d-flex mt-2"> <p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/AWolf81/simple-rpc-ai-backend/blob/master/docs/server-api/registry.md" id="edit-this-page">Edit this page on GitHub</a> </p> </div> </footer> </div> </div> <div class="search-overlay"></div> </div> <script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.esm.min.mjs'; var config = {} ; mermaid.initialize(config); mermaid.run({ querySelector: '.language-mermaid', }); </script> </body> </html>
